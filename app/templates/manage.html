<!doctype html>
<html>

<head>
	<meta charset="UTF-8">
	<title>管理就診資料</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- <link href="{{ url_for('static', path='/assets/css/custom.css') }}" rel="stylesheet"> -->
	<link href="{{ url_for('static', path='/assets/css/mdb.min.css') }}" rel="stylesheet">
	<script src="{{ url_for('static', path='/assets/javascript/jquery-3.6.3.min.js') }}"></script>
	<link href="{{ url_for('static', path='/assets/DataTables/datatables.min.css') }}" rel="stylesheet">
	<script src="{{ url_for('static', path='/assets/DataTables/datatables.min.js') }}"></script>
	<script src="{{ url_for('static', path='/assets/javascript/htmx.min.js') }}"></script>
</head>

<body>

	<div class="shadow-sm">
		<div class="container">
			<div class="row">
				<div class="col-2">
					<a type="button" href="/control" class="btn border p-2 m-3"><img
							src="/static/assets/img/icon_return.png" style="height:25px; width: 25px;"></a>
				</div>
				<div class=col-8>
					<h3 class="text-center mt-4">管理就診資料</h3>
					<!--cdn https://img.icons8.com/external-line-icons-royyan-wijaya/64/null/external-arrow-arrow-me-line-icons-royyan-wijaya-9.png-->
				</div>
				<div>
					<div class="col-2">
						<!-- <a href="#" class="p-3 m-1 position-absolute top-0 end-0"><img
								src="/static/assets/img/icon_user.png" style="height:40px; width: 40px;"></a> -->
					</div>
				</div>

				<!--cdn https://img.icons8.com/external-kiranshastry-lineal-kiranshastry/100/000000/external-user-interface-kiranshastry-lineal-kiranshastry.png-->
			</div>
		</div>

		<!--navbar start-->
		<div class="bg-primary">
			<ul class="nav">
				<li class="nav-item">
					<a class="nav-link link-light" href="#"></a> <!-- 下載病歷(開發中)-->
				</li>
				<li class="nav-item">
					<!-- <a class="nav-link link-light" aria-current="page" href="/add">新增病歷</a> -->
				</li>
				<!-- <li class="nav-item">
				<a class="nav-link link-light" href="#">變更警示</a>
			</li> -->
			</ul>
		</div>
		<!--navbar end-->

		<!--DataTable card start-->
		<div class="container p-3 vh-75 d-flex">
			<div class="card col-11 col-sm-11 col-lg-11 position-absolute start-50 translate-middle-x shadow-sm">
				<div class="card-body p-3" style="font-size:12px;">
					<table id="example" class="table table-hover" style="width:100%">
						<thead class="h5">
							<tr>
								<!-- <th style="width:14px;">
									<div class="form-check">
										<input class="form-check-input" type="checkbox" value="" id="flexCheckDefault"
											disabled>
										<label class="form-check-label" for="flexCheckDefault">

										</label>
									</div>
								</th> -->
								<th>病歷號</th>
								<th>姓名</th>
								<th>性別</th>
								<th>年齡</th>

								<th>就診次數</th>
								<th>警示</th>
								<th>最近就診日</th>
							</tr>
						</thead>
						<tbody class="h5">
							{% for i, j, z in manage %}
							<tr>
								<!-- <td>
									<div class="form-check">
										<input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
										<label class="form-check-label" for="flexCheckDefault">
										</label>
									</div>
								</td> -->
								<td><a href="/watchVisit/{{i[0].PK_PatientID}}/{{i[2]}}">{{i[0].PK_PatientID}}</a>
								</td>
								<td>{{i[0].PatientName}}</td>
								<td>{% if i[0].PatientSex %} 男 {% else %} 女 {% endif %}</td>
								<td>{{j}}歲</td>
								<td>{{i[1]}}</td>
								<td>
									<div class="form-switch">
										<input class="form-check-input" type="checkbox" name="Alert" role="switch"
											id="flexSwitchCheckChecked"  value="1"
											hx-put="/updateAlert/{{i[0].PK_PatientID}}/{{account_id}}" {% if z %} checked {%
											endif %}>
									</div>
								</td>
								<td>{{i[2]}}</td>
							</tr>
							{% endfor %}
						</tbody>
					</table>
				</div>


			</div>
		</div>
		<script src="{{ url_for('static', path='/assets/javascript/mdb.min.js') }}"></script>
		<!--DataTable card start-->
		<script>
			$.fn.dataTable.ext.order['dom-checkbox'] = function (settings, col) {
				return this.api().column(col, { order: 'index' }).nodes().map(function (td, i) {
					return $('input', td).prop('checked') ? '1' : '0';
				});
			};


			$(document).ready(function () {
				$('#example').DataTable({
					"columnDefs": [{
						"targets": 5,
						"orderDataType": "dom-checkbox"
					}],
					order: [[5, 'desc']],

				});
			});
		</script>
</body>
</body>

</html>