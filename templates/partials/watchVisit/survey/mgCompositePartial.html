{% if update %}
<form hx-put="/updateMGComposite/{{patient_id}}/{{mg_composite_date}}" hx-target="this" hx-swap="outerHTML">
    <input type="hidden" name="FK_PatientID" value="{{patient_id}}">
    <input type="hidden" name="PK_MGCompositeTableID" value="{{mg_composite_id}}">
{% endif %}
   
<table class="table table-hover mt-3">
    <thead style="position: sticky; top: 0; background-color: white;">
        <th class="col-2">&nbsp;</th>
        <th>A</th>
        <th>B</th>
        <th>C</th>
        <th>D</th>
    </thead>
    <tbody>
        {% for i in (
            ('1.眼瞼下垂', 'mg_composite_ptosis', 'MGComposite_Ptosis', '>45秒', '11~45秒', '1~10秒', '馬上掉落', 0, 1, 2, 3),
            ('2.複視', 'mg_composite_double_vision', 'MGComposite_DoubleVision', '>45秒', '11~45秒', '1~10秒', '馬上掉落', 0, 1, 3, 4),
            ('3.眼睛閉合', 'mg_composite_eye_closure', 'MGComposite_EyeClosure', '正常', '輕微無力(出力可打開)', '中等無力(輕微出力可打開)', '無法閉合', 0, 0, 1, 2),
            ('4.發聲', 'mg_composite_talking', 'MGComposite_Talking', '正常', '陣發性或是鼻音', '持續性或是鼻音', '聽不懂', 0, 2, 4, 6),
            ('5.咬合咀嚼', 'mg_composite_chewing', 'MGComposite_Chewing', '正常', '固體吞嚥問題', '液體吞嚥問題', '鼻胃管', 0, 2, 4, 6), 
            ('6.吞嚥', 'mg_composite_swallowing', 'MGComposite_Swallowing', '正常', '偶而困難', '常常困難', '鼻胃管', 0, 2, 5, 6),
            ('7.呼吸', 'mg_composite_breathing', 'MGComposite_Breathing', '正常', '運動呼吸困難', '休息呼吸困難', '插管', 0, 2, 4, 9),
            ('8.脖子彎曲', 'mg_composite_neck_flexion', 'MGComposite_NeckFlexion', '正常', '輕微無力', '中等無力', '嚴重無力', 0, 1, 3, 4),
            ('9.肩膀外展', 'mg_composite_shoulder_abduction', 'MGCompostie_ShoulderAbduction', '正常', '輕微無力', '中等無力', '嚴重無力', 0, 2, 4, 5),
            ('10.大腿彎曲', 'mg_composite_hip_flexion', 'MGComposite_HipFlexion', '正常', '輕微無力', '中等無力', '嚴重無力', 0, 2, 4, 5)
            )
            %}
            <tr>
                <td>
                {{i[0]}}
                </td>
            {% for j in (0, 1, 2, 3) %}
                <td>
                    <div class="form-check form-check-inline">
                        <input type="radio" name="{{i[2]}}" id="{{i[1]}}" class="form-check-input mg_composite_score" value="{{i[7+j]}}" 
                        {% if mg_composite %} 
                            {% if mg_composite[i[2]] == i[7+j] %}
                                checked
                            {% elif update %}
                            {% elif watch %}
                                disabled
                            {% endif %}
                        {% else %}
                            {% if j == 0 %}
                                checked
                            {% endif %}
                        {% endif %}
                                onchange="MGCompositeTotal()">
                        <label for="{{i[1]}}" class="form-check-label" style="font-size: 0.9rem;" title="{{i[7+j]}}分">{{i[3+j]}}</label>
                       
                    </div>
                </td>
            {% endfor %}
            </tr>
        {% endfor %}
        
    </tbody>
</table>
<div class="row justify-content-between">
    {% if mg_composite and not watch %}
    <div class="col-4">
        <label for="last_time_qol_score" class="form-label">上次總分 {% if mg_composite_date %} ({{mg_composite_date}}) {% endif %}</label>
        <input type="number" id="last_time_mg_composite_score" class="form-control text-center" readonly value="{{ mg_composite.values() | sum }}">
    </div>
    {% endif %}
    <div class="col-4">
        <label for="mg_composite_score" class="form-label">本次總分</label>
        <input type="number" name="MGComposite_Sum" id="mg_composite_score" class="form-control text-center" readonly value="{{ mg_composite.values() | sum }}" >
    </div>


</div>


    </div>

{% if update %}
    <button type="submit" class="btn btn-primary mt-3">完成</button>
    <button type="submit" class="btn btn-danger mt-3 ms-2"
        hx-get="/returnWatchVisitMGComposite/{{patient_id}}/{{mg_composite_date}}">取消</button>
   
</form>
{% endif %}